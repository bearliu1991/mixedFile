webpackJsonp([11],{"89nZ":function(e,t,n){"use strict";t.a={orderStatus:[{label:"未出货",value:1},{label:"未发货",value:2},{label:"已发货",value:3},{label:"已签收",value:4}],settleStatus:[{label:"已完成",value:0},{label:"未结算",value:1},{label:"已发货",value:2}],settleTypes:[{label:"现结",value:0},{label:"周结",value:1},{label:"月结",value:2},{label:"季结",value:3}],deliveryWay:[{label:"自提",value:1},{label:"现取",value:2},{label:"物流",value:3}],payWays:[{label:"现金",value:0},{label:"微信",value:1},{label:"支付宝",value:2},{label:"赊账",value:3}],orderTypes:[{label:"销售订单",value:1},{label:"补货单",value:2},{label:"退货单",value:3},{label:"零售单",value:4}]}},cZKj:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.fn10 {\n  font-size: 10px;\n}\n.fn12 {\n  font-size: 12px;\n}\n.fn14 {\n  font-size: 14px;\n}\n.fn16 {\n  font-size: 16px;\n}\n.fn18 {\n  font-size: 18px;\n}\n.fn20 {\n  font-size: 20px;\n}\n.fn22 {\n  font-size: 22px;\n}\n.fn24 {\n  font-size: 24px;\n}\n.fn26 {\n  font-size: 26px;\n}\n.fn28 {\n  font-size: 28px;\n}\n.fn30 {\n  font-size: 30px;\n}\n.fn32 {\n  font-size: 32px;\n}\n.cursor {\n  cursor: pointer;\n}\n.fl {\n  float: left;\n}\n.fr {\n  float: right;\n}\n.title_public {\n  padding: 12px 0 18px 0;\n  font-size: 18px;\n  color: #0c0c0d;\n  border-bottom: solid 1px #e3e5e6;\n}\n.text_color {\n  color: #409eff;\n}\n.light_color {\n  color: #e3e4e6;\n}\n.err_color {\n  color: #f56c6c;\n}\n.suc_color {\n  color: #09bb07;\n}\n.center {\n  text-align: center;\n}\n.set_middle {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.set_start {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n}\n.set_between {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.set_around {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n}\n.set_column {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.page_toolbar {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n.table_records {\n  background-color: #bae7ff;\n  height: 50px;\n  float: left;\n  line-height: 50px;\n  margin-top: 20px;\n  margin-bottom: 10px;\n  width: 100%;\n  padding-left: 15px;\n}\n.table_records:before {\n  display: table;\n  content: '';\n}\n.table_records i {\n  color: #409eff;\n}\n.el-pagination .btn-prev,\n.el-pagination .btn-next {\n  padding: 0 12px !important;\n}\n.secondary_form {\n  width: 500px;\n}\n.secondary_form .el-cascader {\n  width: 100%;\n}\n.boxshadow {\n  -webkit-box-shadow: 0 0 5px 1px #ddd;\n          box-shadow: 0 0 5px 1px #ddd;\n}\n.drawer_form {\n  width: 500px;\n}\n.block {\n  display: block;\n}\n.indent {\n  text-indent: 30px;\n}\n.dotted_line {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding-top: 20px;\n  border-top: 1px dashed #ddd;\n}\n.dotted_line .other_item {\n  font-weight: bold;\n}\n.bold {\n  font-weight: bold;\n}\n.process_btns {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  margin-bottom: 20px;\n}\n.border_ {\n  border: 1px solid #ddd;\n}\n.line_through {\n  text-decoration: line-through;\n}\n#app .el-badge__content {\n  border: none;\n}\n.toolbar .el-form--inline .el-form-item__label {\n  padding-right: 8px;\n}\n.el-badge__content.is-fixed {\n  z-index: 99;\n}\nhtml,\nbody,\ndiv,\nspan,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\npre,\na,\nem,\nimg,\ni,\nol,\nul,\nfieldset,\nform,\nlabel,\ntable,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\ncanvas,\nfooter,\nheader,\nsection,\naudio,\nvideo {\n  border: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  margin: 0;\n  padding: 0;\n}\nli {\n  border: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  margin: 0;\n}\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\nol,\nul {\n  list-style: none;\n}\ninput,\nbutton,\nselect,\ntextarea {\n  outline: none;\n  -webkit-appearance: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\nbody,\nhtml {\n  font-family: 'Microsoft Yahei', 'Source Sans Pro', 'sans-serif';\n  line-height: 1;\n  height: 100%;\n  font-size: 14px;\n}\ni {\n  font-style: normal;\n}\n.err_color {\n  color: #f56c6c;\n}\n.success_color {\n  color: #67c23a;\n}\n.warn_color {\n  color: #e6a23c;\n}\n.light_color {\n  color: #909399;\n}\n.info_color {\n  color: #909399;\n}\n@font-face {\n  font-family: \"iconfont\";\n  src: url("+n("41FU")+") ;\n  src: url("+n("41FU")+"#iefix) format('embedded-opentype'), url("+n("AmmJ")+") format('woff'), url("+n("gjvD")+") format('truetype'), url("+n("xCPn")+"#iconfont) format('svg') ;\n}\n.icon {\n  font-family: \"iconfont\" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.header_row {\n  margin-top: 20px;\n}\n.header_row td {\n  padding-top: 60px;\n  position: static;\n}\n.row_header {\n  position: absolute;\n  right: 0;\n  left: 0;\n}\n.row_header .header_wrap {\n  position: absolute;\n  padding-left: 20px;\n  top: -77px;\n  height: 40px;\n  line-height: 40px;\n  background-color: #eaf8ff;\n  width: 100%;\n}\n.row_header .header_wrap span:first-child {\n  margin-right: 20px;\n}\n#order_list .big_btn {\n  display: block;\n}\n#order_list .big_btn label {\n  margin: 10px;\n  display: block;\n}\n#order_list .big_btn label .el-radio-button__inner {\n  display: block;\n  border-radius: 4px;\n  margin-left: -1px;\n  border-left: 1px solid #dcdfe6;\n}\n#order_list .big_btn label.is-active .el-radio-button__inner {\n  border-left: 0;\n}\n",""])},uLLb:function(e,t,n){var o=n("cZKj");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("3b7eb3be",o,!0)},yrmD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Dd8w"),l=n.n(o),a=n("89nZ"),r={data:function(){return{reset:!1,isEditSku:!1,showDrawer:!1,loading:!1,columnLabel:"订单编号",orderStatus:a.a.orderStatus,settleStatusList:[{label:"未结清",value:0},{label:"已结清",value:1}],filterList:[{name:"全部订单",filters:{}},{name:"待付款",filters:{settleStatus:0},num:0},{name:"未备货",filters:{stockStatus:1},num:0},{name:"待签收",filters:{distributionStatus:3},num:0},{name:"已完成",filters:{status:1}},{name:"交易关闭",filters:{status:2}},{name:"退款管理",filters:{status:3}}],payWays:a.a.payWays,settleTypes:a.a.settleTypes,orderTypes:a.a.orderTypes,secShow:!1,tableArr:a.a.tableArrs,filters:{orderCode:"",timeType:null,orderCodeOrCustomerNameOrCustomerPhone:"",orderType:1,userId:0,status:null},users:[],total:0,pageNum:1,pageSize:10,sels:[],ids:[],details:{},curRow:{},outSendConfirm:!1,shipVisible:!1,billChangeForm:{expressCode:"",expessComp:""},billChangeFormRules:{expessComp:[{required:!0,validator:this.noEmpty,message:"请输入物流公司",trigger:"blur"}]},settleVisible:!1,settleForm:{settleAmount:""},settleFormRules:{settleAmount:[{validator:this.mustNumber,message:"必须为数字",trigger:"blur"}]},settleStatus:-1,settleType:null}},mounted:function(){this.init(),this.getUsers()},components:{OrderDetail:n("1Jne").a},methods:{init:function(){switch(this.$route.name){case"replenish":this.$set(this.filters,"orderType",2);break;case"retail":this.$set(this.filters,"orderType",4);break;case"refund":this.$set(this.filters,"orderType",3)}},getDetail:function(e,t){var n=this;this.$postJson(this._basePath.ajaxOrderById,{id:t.id}).then(function(e){e.success&&(n.details=e.data,n.secShow=!0)})},filterEmit:function(e){this.getUsers(e)},formatOrderStatus:function(e,t){var n=e.distributionStatus;return t?1===n?"text_color cursor":2===n?"text_color cursor":3===n?"err_color cursor":"":1===n?"未出货":2===n?"未发货":3===n?"待签收":"已签收"},formatPayWay:function(e){return 0===e?"现金":1===e?"微信":2===e?"支付宝":"赊账"},formatCreateTime:function(e){return this.$dateFns.format(e.createTime,"YYYY-MM-DD HH:mm:ss")},formatSettleType:function(e){var t=this.settleTypes.find(function(t){return t.value===e.settleType});return t?t.label:""},formatBool:function(e,t){return!0===e.isShow?"是":"否"},shipImmediate:function(){var e=this;this.$refs.billChangeForm.validate(function(t){if(t){var n={orderId:e.curRow.id,expressCode:e.billChangeForm.expressCode,expessComp:e.billChangeForm.expessComp};e.$postJson(e._basePath.ajaxOrderSendout,n).then(function(t){t.success&&(e.$message.success("操作成功"),e.getUsers(),e.shipVisible=!1)})}})},settleAmountChange:function(e){this.isNumber(e)&&(e>this.curRow.shouldFee?this.$set(this.settleForm,"settleAmount",this.curRow.shouldFee):this._isFloat(e)&&this.$set(this.settleForm,"settleAmount",(e-0).toFixed(2)))},stockUp:function(){},retreatOrder:function(e){var t=this;this.$confirm("退单后，此订单将作废（扫码支付金额将原路返回，现金支付金额需线下退回），确定退单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$postJson(t._basePath.ajaxOrderRetreatOrder,{orderCode:e.orderCode}).then(function(e){e.success&&(t.$message.success("操作成功"),t.getUsers(!0))})}).catch(function(){})},handleCurrentChange:function(e){this.pageNum=e,this.getUsers()},clearSearch:function(){this.$bus.$emit("clearDate"),this.filters=this._clearVal(this.filters,["orderType","userId"])},getUsers:function(){var e=this,t={pageNum:this.pageNum,pageSize:this.pageSize};this.$set(this.filters,"timeType",this.$refs.dateFilter.getParams());var n=this.filters;this.loading=!0,this.$postJson(this._basePath.ajaxOrderByPage,l()({},t,n)).then(function(t){e.loading=!1,t.success&&(e.total=t.data.count,e.users=t.data.datas)})}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"app-container",attrs:{id:"order_list"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.secShow,expression:"!secShow"}]},[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0,model:e.filters},nativeOn:{submit:function(e){e.preventDefault()}}},[e._isHave(e.filters.orderType,[1,2,3])?n("el-form-item",{attrs:{label:"查询"}},[n("el-input",{attrs:{placeholder:"订单号"},model:{value:e.filters.orderCode,callback:function(t){e.$set(e.filters,"orderCode",t)},expression:"filters.orderCode"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"下单时间"}},[n("date-pick",{ref:"dateFilter",model:{value:e.reset,callback:function(t){e.reset=t},expression:"reset"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"查询"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getUsers()}}},[e._v("查询")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:e.clearSearch}},[e._v("清空筛选条件")])],1)],1),e._v(" "),n("div",[n("filter-list",{attrs:{filterList:e.filterList},on:{filterEmit:e.filterEmit}})],1)],1),e._v(" "),n("div",{staticClass:"table_records"},[n("span",{staticClass:"icon"},[e._v("")]),e._v(" 共"),n("i",[e._v(" "+e._s(e.total)+" ")]),e._v("条记录")]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableArr,"highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"orderCode",label:e.columnLabel}}),e._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"开单时间",formatter:e.formatCreateTime}}),e._v(" "),n("el-table-column",{attrs:{prop:"customerName",label:"客户名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"finalAcount",label:"交易状态"}}),e._v(" "),n("el-table-column",{attrs:{prop:"finalAcount",label:"实收款"}}),e._v(" "),n("el-table-column",{attrs:{prop:"finalAcount",label:"备货状态"}}),e._v(" "),n("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("查看")]),e._v(" "),n("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(n){e.retreatOrder(t.row)}}},[e._v("退单")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.stockUp(t.row)}}},[e._v("备货")])]}}])})],1),e._v(" "),n("el-col",{staticClass:"toolbar_process",attrs:{span:24}},[n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"",visible:e.shipVisible,width:"600px"},on:{"update:visible":function(t){e.shipVisible=t}}},[n("el-form",{ref:"billChangeForm",attrs:{inline:!0,model:e.billChangeForm,rules:e.billChangeFormRules},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{prop:"expressCode",label:"订单总价为："}},[e._v("\n          "+e._s(5500)+"\n        ")]),e._v(" "),n("el-form-item",{attrs:{label:"修改后订单总价为：",prop:"expessComp"}},[n("el-input",{attrs:{placeholder:""},on:{change:function(t){e.settleAmountChange(e.settleForm.settleAmount)}},model:{value:e.settleForm.settleAmount,callback:function(t){e.$set(e.settleForm,"settleAmount",t)},expression:"settleForm.settleAmount"}}),e._v("元\n        ")],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(t){e.shipVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.shipImmediate}},[e._v("立即发货")])],1)],1),e._v(" "),n("Drawer",{model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[n("el-form",[n("el-form-item",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users}},[n("el-table-column",{attrs:{prop:"orderCode",label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"orderCode",label:"商品标题"}}),e._v(" "),n("el-table-column",{attrs:{prop:"orderCode",label:"数量"}}),e._v(" "),n("el-table-column",{attrs:{prop:"orderCode",label:"实际备货总数"}},[n("el-input"),n("el-button",{attrs:{type:"primary",plain:""}},[e._v("已备齐")])],1)],1)],1),e._v(" "),n("el-form-item",[n("el-switch",{attrs:{"active-value":1,"active-color":"#13ce66","inactive-value":0},model:{value:e.isEditSku,callback:function(t){e.isEditSku=t},expression:"isEditSku"}})],1),e._v(" "),e.isEditSku?n("el-form-item"):e._e()],1)],1),e._v(" "),n("Secondary",{attrs:{title:"订单详情"},model:{value:e.secShow,callback:function(t){e.secShow=t},expression:"secShow"}},[e.secShow?n("OrderDetail",{attrs:{details:e.details}}):e._e()],1)],1)},staticRenderFns:[]};var i=n("VU/8")(r,s,!1,function(e){n("uLLb")},null,null);t.default=i.exports}});