webpackJsonp([1],{"89nZ":function(t,e,s){"use strict";e.a={orderStatus:[{label:"未出货",value:1},{label:"未发货",value:2},{label:"已发货",value:3},{label:"已签收",value:4}],settleStatus:[{label:"已完成",value:0},{label:"未结算",value:1},{label:"已发货",value:2}],settleTypes:[{label:"现结",value:0},{label:"周结",value:1},{label:"月结",value:2},{label:"季结",value:3}],deliveryWay:[{label:"自提",value:1},{label:"现取",value:2},{label:"物流",value:3}],payWays:[{label:"现金",value:0},{label:"微信",value:1},{label:"支付宝",value:2},{label:"赊账",value:3}],orderTypes:[{label:"销售订单",value:1},{label:"补货单",value:2},{label:"退货单",value:3},{label:"零售单",value:4}]}},M9Eb:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"\n.fn10 {\n  font-size: 10px;\n}\n.fn12 {\n  font-size: 12px;\n}\n.fn14 {\n  font-size: 14px;\n}\n.fn16 {\n  font-size: 16px;\n}\n.fn18 {\n  font-size: 18px;\n}\n.fn20 {\n  font-size: 20px;\n}\n.fn22 {\n  font-size: 22px;\n}\n.fn24 {\n  font-size: 24px;\n}\n.fn26 {\n  font-size: 26px;\n}\n.fn28 {\n  font-size: 28px;\n}\n.fn30 {\n  font-size: 30px;\n}\n.fn32 {\n  font-size: 32px;\n}\n.cursor {\n  cursor: pointer;\n}\n.fl {\n  float: left;\n}\n.fr {\n  float: right;\n}\n.title_public {\n  padding: 12px 0 18px 0;\n  font-size: 18px;\n  color: #0c0c0d;\n  border-bottom: solid 1px #e3e5e6;\n}\n.text_color {\n  color: #409eff;\n}\n.light_color {\n  color: #e3e4e6;\n}\n.err_color {\n  color: #f56c6c;\n}\n.suc_color {\n  color: #09bb07;\n}\n.center {\n  text-align: center;\n}\n.set_middle {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.set_start {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n}\n.set_between {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.set_around {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n}\n.set_column {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.page_toolbar {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n.table_records {\n  background-color: #bae7ff;\n  height: 50px;\n  float: left;\n  line-height: 50px;\n  margin-top: 20px;\n  margin-bottom: 10px;\n  width: 100%;\n  padding-left: 15px;\n}\n.table_records:before {\n  display: table;\n  content: '';\n}\n.table_records i {\n  color: #409eff;\n}\n.el-pagination .btn-prev,\n.el-pagination .btn-next {\n  padding: 0 12px !important;\n}\n.secondary_form {\n  width: 500px;\n}\n.secondary_form .el-cascader {\n  width: 100%;\n}\n.boxshadow {\n  -webkit-box-shadow: 0 0 5px 1px #ddd;\n          box-shadow: 0 0 5px 1px #ddd;\n}\n.drawer_form {\n  width: 500px;\n}\n.block {\n  display: block;\n}\n.indent {\n  text-indent: 30px;\n}\n.dotted_line {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding-top: 20px;\n  border-top: 1px dashed #ddd;\n}\n.dotted_line .other_item {\n  font-weight: bold;\n}\n.bold {\n  font-weight: bold;\n}\n.process_btns {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  margin-bottom: 20px;\n}\n.border_ {\n  border: 1px solid #ddd;\n}\n.line_through {\n  text-decoration: line-through;\n}\n#app .el-badge__content {\n  border: none;\n}\n.toolbar .el-form--inline .el-form-item__label {\n  padding-right: 8px;\n}\n.el-badge__content.is-fixed {\n  z-index: 99;\n}\nhtml,\nbody,\ndiv,\nspan,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\npre,\na,\nem,\nimg,\ni,\nol,\nul,\nfieldset,\nform,\nlabel,\ntable,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\ncanvas,\nfooter,\nheader,\nsection,\naudio,\nvideo {\n  border: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  margin: 0;\n  padding: 0;\n}\nli {\n  border: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  margin: 0;\n}\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\nol,\nul {\n  list-style: none;\n}\ninput,\nbutton,\nselect,\ntextarea {\n  outline: none;\n  -webkit-appearance: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\nbody,\nhtml {\n  font-family: 'Microsoft Yahei', 'Source Sans Pro', 'sans-serif';\n  line-height: 1;\n  height: 100%;\n  font-size: 14px;\n}\ni {\n  font-style: normal;\n}\n.err_color {\n  color: #f56c6c;\n}\n.success_color {\n  color: #67c23a;\n}\n.warn_color {\n  color: #e6a23c;\n}\n.light_color {\n  color: #909399;\n}\n.info_color {\n  color: #909399;\n}\n@font-face {\n  font-family: \"iconfont\";\n  src: url("+s("41FU")+") ;\n  src: url("+s("41FU")+"#iefix) format('embedded-opentype'), url("+s("AmmJ")+") format('woff'), url("+s("gjvD")+") format('truetype'), url("+s("xCPn")+"#iconfont) format('svg') ;\n}\n.icon {\n  font-family: \"iconfont\" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n#order_list .in_debt {\n  text-align: center;\n  font-weight: bold;\n  margin-top: 20px;\n}\n#order_list .settle_h3 {\n  line-height: 20px;\n}\n#order_list .confirm_checkbox {\n  margin: 20px 0;\n}\n#order_list .process_td .el-button {\n  margin: 3px;\n}\n#order_list .big_btn {\n  display: block;\n}\n#order_list .big_btn label {\n  margin: 10px;\n  display: block;\n}\n#order_list .big_btn label .el-radio-button__inner {\n  display: block;\n  border-radius: 4px;\n  margin-left: -1px;\n  border-left: 1px solid #dcdfe6;\n}\n#order_list .big_btn label.is-active .el-radio-button__inner {\n  border-left: 0;\n}\n",""])},MAYo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("Dd8w"),n=s.n(r),a=s("89nZ"),o={data:function(){return{isShowHangupOrder:!1,processWidth:270,showDrawer:!1,loading:!1,reset:!1,drawerDetail:{},placeholder:"",columnLabel:"",orderStatus:a.a.orderStatus,settleStatusList:[{label:"未结算",value:0},{label:"已结算",value:1}],payWays:a.a.payWays,settleTypes:a.a.settleTypes,orderTypes:a.a.orderTypes,secShow:!1,filters:{orderCodeOrNameOrPhone:"",timeType:null,orderCodeOrCustomerNameOrCustomerPhone:"",orderType:1,status:null},users:[],total:0,pageNum:1,pageSize:10,ids:[],details:{},curRow:{},shipVisible:!1,shipForm:{expressCode:"",expressNo:""},settleConfirm:!1,logistics:[],shipFormRules:{expressCode:[{required:!0,validator:this.noEmpty,message:"请选择物流公司",trigger:"blur"}],expressNo:[{required:!0,validator:this.noEmpty,message:"请输入快递单号",trigger:"blur"}]},settleForm:{settleAmount:""},settleFormRules:{settleAmount:[{validator:this.mustNumber,message:"必须为数字",trigger:"blur"}]},settleStatus:-1,settleType:null,filterNum:{unSettleCoun:"",unStockCount:"",unOutCount:"",unDistribeCount:"",unSignCount:""},filterList:[{name:"全部",filters:{}},{name:"待确认",filters:{status:0},num:0},{name:"待付款",filters:{status:3},num:0},{name:"待发货",filters:{status:5},num:0},{name:"待出货",filters:{status:4},num:0},{name:"待签收",filters:{status:6},num:0},{name:"交易完成",filters:{status:7}},{name:"交易关闭-档口退单",filters:{status:8}},{name:"交易关闭-交易超时",filters:{status:9}},{name:"订单驳回",filters:{status:2}}],vipSettleType:[{name:"全部",filters:{settleType:""}},{name:"现结",filters:{settleType:1}},{name:"挂账",filters:{settleType:2}}],orderStatusFilter:[{name:"全部",filters:{}},{name:"交易完成",filters:{status:7}},{name:"交易关闭",filters:{status:10}}],vipSettleStatus:[{name:"全部",filters:{}},{name:"已结帐",filters:{settleStatus:1}},{name:"未结账",filters:{settleStatus:0},num:0}],vipStatus:[{name:"全部",filters:{}},{name:"待发货",filters:{status:5},num:0},{name:"待出货",filters:{status:4},num:0},{name:"交易完成",filters:{status:7}},{name:"交易关闭",filters:{status:8}}]}},mounted:function(){this.init(),this.getUsers(!0)},components:{OrderDetail:s("1Jne").a},methods:{init:function(){switch(this.placeholder="订单号/客户名/手机号",this.$route.path){case"/order/sales":this.$set(this.filters,"orderType",1),this.columnLabel="销售单号";break;case"/order/replenish":this.$set(this.filters,"orderType",2),this.columnLabel="补货单号";break;case"/order/retail":this.$set(this.filters,"orderType",4),this.columnLabel="零售单号",this.placeholder="零售单号";break;case"/order/refund":this.$set(this.filters,"orderType",3),this.columnLabel="退单单号";break;case"/order/fastReturn":this.$set(this.filters,"orderType",5),this.columnLabel="快捷退货单号",this.placeholder="快捷退货单号/客户名";break;case"/order/vipOrder":this.$set(this.filters,"orderType",6),this.columnLabel="VIP客户订单号",this.placeholder="订单号/客户名",this.processWidth=340;break;default:this.$set(this.filters,"orderType",1)}},getFiltersNum:function(){var t=this;this.$postJson(this._basePath.ajaxOrderFiltersNum,{orderType:this.filters.orderType}).then(function(e){e.success&&(t.filterNum=e.data,t.$set(t.filterList,1,n()({},t.filterList[1],{num:t.filterNum.unConfirmStatusCount})),t.$set(t.filterList,2,n()({},t.filterList[2],{num:t.filterNum.unPayCount})),t.$set(t.filterList,3,n()({},t.filterList[3],{num:t.filterNum.unDistributeCount})),t.$set(t.filterList,4,n()({},t.filterList[4],{num:t.filterNum.unOutCount})),t.$set(t.filterList,5,n()({},t.filterList[5],{num:t.filterNum.unSignCount})),t.$set(t.vipStatus,1,n()({},t.vipStatus[1],{num:t.filterNum.unDistributeCount})),t.$set(t.vipStatus,2,n()({},t.vipStatus[2],{num:t.filterNum.unOutCount})),t.$set(t.vipSettleStatus,2,n()({},t.vipSettleStatus[2],{num:t.filterNum.unSettleCount})))})},isAvailRetreat:function(t){return this._isHave(t.status,[0,3,4,5])||7===t.status&&2===t.distributionType},switchChange:function(t){var e=this;if(0===t.settleStatus){var s=this;this.$confirm("确定该客户已结账？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$postJson(e._basePath.ajaxStallCustomerEnable,{orderCode:t.orderCode,settleStatus:1}).then(function(r){r.success?(e.$message.success("状态修改成功！"),s.getUsers(!0)):e.$set(t,"settleStatus",1)})})}else 1===t.settleStatus&&this.$confirm("将结账状态设为未结账？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$postJson(e._basePath.ajaxStallCustomerEnable,{orderCode:t.orderCode,settleStatus:0}).then(function(s){s.success?(e.$message.success("状态修改成功！"),e.getUsers(!0)):e.$set(t,"settleStatus",0)})})},getLogisticsCom:function(t){var e=this;this.$postJson(this._basePath.ajaxLogisticsCom,{expressNo:t}).then(function(t){t.success&&(e.logistics=t.data)})},showDrawerDetail:function(t){this.getDetail(t,!0)},getDetail:function(t,e){var s=this;this.$postJson(this._basePath.ajaxOrderById,{orderCode:t.orderCode}).then(function(t){t.success&&(e?(s.showDrawer=!0,s.drawerDetail=t.data||{}):s.details=t.data||{},s.secShow=!0)})},downFile:function(t,e){var s=document.createElement("a");s.download=e;var r=new Blob([t]),n=window.URL.createObjectURL(r);s.href=t,s.click(),window.URL.revokeObjectURL(n)},downloadExcel:function(){var t=this,e=this.$refs.dateFilter.getParams(),s=e[0],r=e[1],n=this.$refs.vipSettleType&&this.$refs.vipSettleType.getParams(),a=this.$refs.filterBtn&&this.$refs.filterBtn.getParams(),o=this.$refs.orderStatusFilter&&this.$refs.orderStatusFilter.getParams(),i=this.$refs.vipStatus&&this.$refs.vipStatus.getParams(),l=this.$refs.vipSettleStatus&&this.$refs.vipSettleStatus.getParams(),u={orderType:this.filters.orderType,stallId:this.getCookie("stallId")-0};(this.filters.orderCodeOrNameOrPhone&&(u.orderCodeOrNameOrPhone=this.filters.orderCodeOrNameOrPhone),n&&(u.settleType=n.settleType),a&&void 0!==a.status&&(u.status=a.status),o&&void 0!==o.status&&(u.status=o.status),i&&void 0!==i.status&&(u.status=i.status),l&&void 0!==l.settleStatus&&(u.settleStatus=l.settleStatus),r)?this._differInDays(s,r)>31?this.$message.error("每次导出数据时间跨度不能大于31天"):(u.startTime=this._formatTime(s),u.endTime=this._formatTime(r),this.$postJson(this._basePath.ajaxDownloadVerify,u).then(function(e){e.success&&(u.token=e.data.token,t.downFile(t._basePath.ajaxDownloadOrder+"?"+t.serializeParam(u),e.data.fileName))})):this.$confirm("导出时间未选择，默认将导出近31天数据，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u.startTime=t._formatTime(t._subDayTime(31)),u.endTime=t._formatTime(t._subDayTime(0)),t.$postJson(t._basePath.ajaxDownloadVerify,u).then(function(e){e.success&&(u.token=e.data.token,t.downFile(t._basePath.ajaxDownloadOrder+"?"+t.serializeParam(u),e.data.fileName))})}).catch(function(){})},formatStatus:function(t,e){var s=t.status;return e?-1===s?"warn_color":0===s?"warn_color":1===s?"":2===s?"err_color":3===s?"":4===s?"text_color":5===s?"text_color":6===s?"":7===s?"success_color":8===s?"err_color":9===s?"err_color":10===s?"err_color":"—":-1===s?"订单异常":0===s?"待确认":1===s?"已确认":2===s?"订单驳回":3===s?"待付款":4===s?"待出货":5===s?"待发货":6===s?"待签收":7===s?"交易完成":8===s?"交易关闭-档口退单":9===s?"交易关闭-交易超时":10===s?"交易关闭-订单作废":"—"},formatReturnType:function(t){var e=t.returnType;return 1===e?"账户余额退款":2===e?"线下退款":"—"},formatDelivery:function(t){return 1===t.distributionType?"自提":2===t.distributionType?"现取":3===t.distributionType?"物流":"—"},formatDistributionStatus:function(t,e){var s=t.distributionStatus;return e?1===s?"text_color":2===s?"text_color":3===s?"err_color":"":1===s?"未出货":2===s?"未发货":3===s?"待签收":4===s?"已签收":"—"},formatPayWay:function(t){var e=t.payType;return 0===e?"未选择":1===e?"现金":2===e?"微信":3===e?"支付宝":"—"},formatStockStatus:function(t,e){var s=t.stockStatus;return e&&2===s?"success_color":0===s?"无":1===s?"未备货":2===s?"已备货":"—"},formatCreateTime:function(t){return this.$dateFns.format(t.createTime,"YYYY-MM-DD HH:mm:ss")},formatOrderType:function(t){return 1===t.orderType?"销售订单":2===t.orderType?"补货单":3===t.orderType?"退货单":4===t.orderType?"零售单":5===t.orderType?"快捷退货单":"VIP客户单"},formatSettleType:function(t){var e=t.settleType;return 1===e?"现结":2===e?"挂账":3===e?"赊账":"—"},formatCustomerName:function(t){t.customerName;var e=t.customerType;return 1===e?t.customerName:3===e?"散客":"—"},formatSettleStatus:function(t,e){var s=t.settleStatus;return e?0===s?"text_color cursor":"":0===s?"未结算":"已结算"},formatBool:function(t,e){return!0===t.isShow?"是":"否"},queryData:function(t){t&&t.hasOwnProperty("settleType")&&(this.isShowHangupOrder=2===t.settleType),this.pageNum=1,this.getUsers(!0)},setShipmentStatus:function(t,e){var s=this;this.curRow=t,this.shipVisible=!0,e||this.$nextTick(function(){s.$refs.shipForm.resetFields()})},orderCancel:function(t){var e=this;this.$confirm("点击作废后，该订单将失效，确定作废？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$postJson(e._basePath.ajaxOrderCancel,{orderCode:t.orderCode}).then(function(t){t.success&&(e.$message.success("操作成功"),e.getUsers(!0))})}).catch(function(){})},retreatOrder:function(t){var e=this;this.$confirm("退单后，此订单将作废（扫码支付金额将原路返回，现金支付金额需线下退回），确定退单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$postJson(e._basePath.ajaxOrderRetreatOrder,{orderCode:t.orderCode}).then(function(t){t.success&&(e.$message.success("操作成功"),e.getUsers(!0))})}).catch(function(){})},orderStock:function(t){var e=this;if(2===t.stockStatus)return!1;this.$confirm("点击备货后将不可修改备货状态，确定商品已经完成备货？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$postJson(e._basePath.ajaxOrderStock,{orderCode:t.orderCode,stockStatus:2}).then(function(t){t.success&&(e.$message.success("备货成功"),e.getUsers(!0))})})},remindCustomerFn:function(t,e){var s=this;this.$postJson(this._basePath.ajaxOrderRemindCustomer,{orderCode:t.orderCode,type:e}).then(function(t){t.success&&(11===e&&s.$message.success("提醒对方确认订单消息成功发出！"),12===e&&s.$message.success("提醒对方付款消息成功发出！"),13===e&&s.$message.success("提醒对方收货消息成功发出！"))})},shipImmediate:function(){var t=this;this.$refs.shipForm.validate(function(e){if(e){var s={orderCode:t.curRow.orderCode,expressCode:t.shipForm.expressCode,expressNo:t.shipForm.expressNo};t.$postJson(t._basePath.ajaxOrderSendout,s).then(function(e){e.success&&(t.$message.success("操作成功"),t.getUsers(!0),t.shipVisible=!1)})}})},handleCurrentChange:function(t){this.pageNum=t,this.getUsers()},clearSearch:function(){this.$bus.$emit("clearDate"),this.reset=!0,this.filters=this._clearVal(this.filters,["orderType"])},getUsers:function(t){var e=this;t&&this.getFiltersNum();var s={pageNum:this.pageNum,pageSize:this.pageSize},r=this.$refs.dateFilter&&this.$refs.dateFilter.getParams(),a=this.$refs.filterBtn&&this.$refs.filterBtn.getParams(),o=this.$refs.vipSettleType&&this.$refs.vipSettleType.getParams(),i=this.$refs.vipSettleStatus&&this.$refs.vipSettleStatus.getParams(),l=this.$refs.vipStatus&&this.$refs.vipStatus.getParams(),u=this.$refs.orderStatusFilter&&this.$refs.orderStatusFilter.getParams();this.$set(this.filters,"startTime",r[0]),this.$set(this.filters,"endTime",r[1]),s=n()({},s,this.filters,a,o,l,u,i),this.loading=!0,this.$postJson(this._basePath.ajaxOrderByPage,s).then(function(t){e.loading=!1,t.success&&(e.total=t.data.count,e.users=t.data.datas)})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"app-container",attrs:{id:"order_list"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.secShow,expression:"!secShow"}]},[s("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[s("el-form",{attrs:{inline:!0,model:t.filters},nativeOn:{submit:function(t){t.preventDefault()}}},[s("el-form-item",{attrs:{label:"查询"}},[s("el-input",{attrs:{placeholder:t.placeholder},model:{value:t.filters.orderCodeOrNameOrPhone,callback:function(e){t.$set(t.filters,"orderCodeOrNameOrPhone",e)},expression:"filters.orderCodeOrNameOrPhone"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"开单时间"}},[s("date-pick",{ref:"dateFilter",model:{value:t.reset,callback:function(e){t.reset=e},expression:"reset"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),s("el-button",{attrs:{type:"text"},on:{click:t.clearSearch}},[t._v("清空筛选条件")]),t._v(" "),s("el-button",{attrs:{type:"danger"},on:{click:t.downloadExcel}},[t._v("导出订单")])],1)],1),t._v(" "),1===t.filters.orderType||2===t.filters.orderType?s("filter-list",{ref:"filterBtn",attrs:{filterList:t.filterList},on:{filterChange:t.queryData}}):t._e(),t._v(" "),6===t.filters.orderType?s("filter-list",{ref:"vipSettleType",staticStyle:{"margin-bottom":"0"},attrs:{title:"VIP结算类型",filterList:t.vipSettleType},on:{filterChange:t.queryData}}):t._e(),t._v(" "),6===t.filters.orderType&&t.isShowHangupOrder?s("filter-list",{ref:"vipSettleStatus",staticStyle:{"margin-bottom":"0"},attrs:{title:"挂账单结算状态",filterList:t.vipSettleStatus},on:{filterChange:t.queryData}}):t._e(),t._v(" "),6===t.filters.orderType?s("filter-list",{ref:"vipStatus",staticStyle:{"margin-bottom":"0"},attrs:{title:"VIP订单状态",filterList:t.vipStatus},on:{filterChange:t.queryData}}):t._e(),t._v(" "),5===t.filters.orderType?s("filter-list",{ref:"orderStatusFilter",staticStyle:{"margin-bottom":"0"},attrs:{title:"订单状态",filterList:t.orderStatusFilter},on:{filterChange:t.queryData}}):t._e()],1),t._v(" "),s("record-count",{attrs:{total:t.total}}),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.users,"highlight-current-row":""}},[s("el-table-column",{attrs:{type:"selection",width:"45"}}),t._v(" "),[s("el-table-column",{attrs:{prop:"orderCode",label:t.columnLabel,"min-width":"120px"}})],t._v(" "),s("el-table-column",{attrs:{prop:"createTime","min-width":"160px",label:"开单时间",formatter:t.formatCreateTime}}),t._v(" "),t._isHave(t.filters.orderType,[5,6])?[s("el-table-column",{attrs:{prop:"customerName",label:"VIP客户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(4===e.row.customerType?e.row.customerName:"散客")+"\n            ")]}}])})]:t._e(),t._v(" "),t._isHave(t.filters.orderType,[6])?[s("el-table-column",{attrs:{prop:"settleType",label:"VIP结算类型",formatter:t.formatSettleType}}),t._v(" "),s("el-table-column",{attrs:{prop:"distributionType",label:"配送方式",formatter:t.formatDelivery}}),t._v(" "),s("el-table-column",{attrs:{prop:"actualFee",label:"应收金额(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"err_color"},[t._v(t._s(e.row.shouldFee))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"订单状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.formatStatus(e.row,!0)},[t._v(t._s(t.formatStatus(e.row)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"stockStatus",label:"备货状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:[t.formatStockStatus(e.row,!0)]},[t._v(t._s(t.formatStockStatus(e.row)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"是否结账"},scopedSlots:t._u([{key:"default",fn:function(e){return[2===e.row.settleType?s("span",{class:[0===e.row.settleStatus?"err_color":"success_color"],staticStyle:{"margin-right":"10px"}},[t._v(t._s(0===e.row.settleStatus?"否":"是"))]):t._e(),t._v(" "),1===e.row.settleType?s("span",{staticClass:"success_color",staticStyle:{"margin-right":"10px"}},[t._v("是")]):t._e()]}}])})]:t._e(),t._v(" "),t._isHave(t.filters.orderType,[1,2,3])?[s("el-table-column",{attrs:{prop:"customerName",label:"客户名",formatter:t.formatCustomerName}})]:t._e(),t._v(" "),t._isHave(t.filters.orderType,[1,2])?[s("el-table-column",{attrs:{prop:"distributionType",label:"配送方式",formatter:t.formatDelivery}}),t._v(" "),s("el-table-column",{attrs:{prop:"settleType",label:"结算类型",formatter:t.formatSettleType}}),t._v(" "),s("el-table-column",{attrs:{prop:"stockStatus",label:"备货状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:[t.formatStockStatus(e.row,!0)]},[t._v(t._s(t.formatStockStatus(e.row)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"actualFee",label:"应收金额(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"err_color"},[t._v(t._s(e.row.shouldFee))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"订单状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.formatStatus(e.row,!0)},[t._v(t._s(t.formatStatus(e.row)))])]}}])})]:t._e(),t._v(" "),t._isHave(t.filters.orderType,[5])?s("el-table-column",{attrs:{prop:"status",label:"订单状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.formatStatus(e.row,!0)},[t._v(t._s(t.formatStatus(e.row)))])]}}])}):t._e(),t._v(" "),t._isHave(t.filters.orderType,[4,5])?[s("el-table-column",{attrs:{prop:"customerPhone",label:5===t.filters.orderType?"退款方式":"收款方式",formatter:t.formatPayWay}}),t._v(" "),s("el-table-column",{attrs:{prop:"actualFee",label:5===t.filters.orderType?"实退金额(元)":"实收金额(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"err_color"},[t._v(t._s(e.row.actualFee))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"totalNum",label:"商品数量"}})]:t._e(),t._v(" "),3===t.filters.orderType?[s("el-table-column",{attrs:{prop:"returnType",label:"退款方式",formatter:t.formatReturnType}}),t._v(" "),s("el-table-column",{attrs:{prop:"actualFee",label:"实退金额(元)","min-width":"120px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"totalNum",label:"退货数量"}}),t._v(" "),s("el-table-column",{attrs:{prop:"oldOrderCode",label:"原订单编号","min-width":"120px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"customerPhone",label:"手机号"}})]:t._e(),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:t.processWidth,fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"process_td"},[s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){t.getDetail(e.row)}}},[t._v("查看")]),t._v(" "),t._isHave(t.filters.orderType,[5])&&10!==e.row.status?s("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(s){t.orderCancel(e.row,!0)}}},[t._v("订单作废")]):t._e(),t._v(" "),t._isHave(t.filters.orderType,[1,2,6])?[t.isAvailRetreat(e.row)?s("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(s){t.retreatOrder(e.row)}}},[t._v("退单")]):t._e(),t._v(" "),t._isHave(e.row.status,[5])?s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){t.setShipmentStatus(e.row)}}},[t._v("发货")]):t._e(),t._v(" "),t._isHave(e.row.status,[6])?s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){t.setShipmentStatus(e.row)}}},[t._v("更改物流")]):t._e(),t._v(" "),t._isHave(e.row.status,[4])&&1===e.row.stockStatus?s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){t.orderStock(e.row)}}},[t._v("备货")]):t._e(),t._v(" "),t._isHave(e.row.status,[0])?s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){t.remindCustomerFn(e.row,11)}}},[t._v("提醒确认")]):t._e(),t._v(" "),t._isHave(e.row.status,[3])?s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){t.remindCustomerFn(e.row,12)}}},[t._v("提醒付款")]):t._e(),t._v(" "),6===e.row.status?s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){t.remindCustomerFn(e.row,13)}}},[t._v("提醒收货")]):t._e(),t._v(" "),8!==e.row.status&&0===e.row.settleStatus&&2===e.row.settleType?s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){t.switchChange(e.row)}}},[t._v("设为已结账")]):t._e(),t._v(" "),8!==e.row.status&&1===e.row.settleStatus&&2===e.row.settleType?s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){t.switchChange(e.row)}}},[t._v("设为未结账")]):t._e()]:t._e()],2)]}}])})],2),t._v(" "),s("div",{staticClass:"page_toolbar"},[s("el-pagination",{attrs:{layout:"prev, pager, next, jumper","prev-text":"上一页","next-text":"下一页",background:"","page-size":t.pageSize,"current-page":t.pageNum,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"发货",visible:t.shipVisible,center:"",width:"600px"},on:{"update:visible":function(e){t.shipVisible=e}}},[s("el-form",{ref:"shipForm",staticClass:"set_middle",attrs:{inline:!0,"label-width":"100px",model:t.shipForm,rules:t.shipFormRules}},[s("div",{staticClass:"set_column"},[s("el-form-item",{attrs:{prop:"expressNo",label:"快递单号"}},[s("el-input",{attrs:{placeholder:"请输入快递单号"},on:{blur:function(e){t.getLogisticsCom(t.shipForm.expressNo)}},model:{value:t.shipForm.expressNo,callback:function(e){t.$set(t.shipForm,"expressNo",e)},expression:"shipForm.expressNo"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"物流公司",prop:"expressCode"}},[s("el-select",{attrs:{placeholder:"请选择物流公司"},model:{value:t.shipForm.expressCode,callback:function(e){t.$set(t.shipForm,"expressCode",e)},expression:"shipForm.expressCode"}},t._l(t.logistics,function(t,e){return s("el-option",{key:e,attrs:{label:t.name,value:t.code}})}))],1)],1)]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{nativeOn:{click:function(e){t.shipVisible=!1}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.shipImmediate}},[t._v("立即发货")])],1)],1),t._v(" "),s("Secondary",{attrs:{title:t.formatOrderType(t.details)},model:{value:t.secShow,callback:function(e){t.secShow=e},expression:"secShow"}},[t.secShow?s("OrderDetail",{attrs:{details:t.details},on:{showDrawerDetail:t.showDrawerDetail}}):t._e()],1),t._v(" "),s("Drawer",{attrs:{title:"订单详情",width:"800px"},model:{value:t.showDrawer,callback:function(e){t.showDrawer=e},expression:"showDrawer"}},[s("OrderDetail",{attrs:{details:t.drawerDetail}})],1)],1)},staticRenderFns:[]};var l=s("VU/8")(o,i,!1,function(t){s("gXYZ")},null,null);e.default=l.exports},gXYZ:function(t,e,s){var r=s("M9Eb");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);s("rjj0")("5057046b",r,!0)}});