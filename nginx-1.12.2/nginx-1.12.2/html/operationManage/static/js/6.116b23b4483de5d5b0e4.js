webpackJsonp([6],{"3yOb":function(t,n,e){var a=e("rtdu");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("5fef23e4",a,!0)},CYQq:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("Dd8w"),o=e.n(a),i={data:function(){return{loading:!1,users:[],reset:!1,info:{},switchStatus:"0",dialogShow:!1,details:{},sels:[],filters:{productCode:"",stallName:""},pageNum:1,pageSize:10,total:0,editForm:{rule:"",goodNum:""}}},props:{curItem:{type:Object,default:function(){}}},mounted:function(){this.getUsers()},methods:{queryData:function(){this.pageNum=1,this.getUsers()},clearFilter:function(){this.filters={productCode:"",stallName:""},this.reset=!0},formatTime:function(t){return this._formatTime(t.auditTime,!0)},setToTop:function(t){var n=this;this.$postJson(this._basePath.ajaxOperationTailGoodsSetTop,{ids:[t.id].toString(),tailHandleIsSetTop:!0}).then(function(t){t.success&&(n.$message.success("置顶成功"),n.queryData())})},getRule:function(){var t=this;this.$postJson(this._basePath.ajaxOperationTailRuleGet).then(function(n){n.success&&(t.editForm={rule:n.datatailHandleRule,goodNum:n.data.tailHandleNumber})})},saveRule:function(){var t=this;this.$refs.editForm.validate(function(n){if(n){var e={tailHandleNumber:t.editForm.goodNum,tailHandleRule:t.editForm.rule};t.$postJson(t._basePath.ajaxOperationTailRuleSave,e).then(function(n){n.success&&t.$message.success("保存成功！"),t.dialogShow=!1})}})},clearSearch:function(){this.$bus.$emit("clearDate"),this.reset=!0},selsChange:function(t){this.sels=t},handleCurrentChange:function(t){this.pageNum=t,this.getUsers()},batchRemove:function(t){var n=this,e=t?[t.id]:this.sels.map(function(t){return t.id});this.$confirm("确认删除选中内容吗？","提示",{type:"warning"}).then(function(){var t={ids:e.toString()};n.$postJson(n._basePath.ajaxOperationTailGoodsDel,t).then(function(t){t.success&&(n.$message({message:"删除成功",type:"success"}),n.queryData())})}).catch(function(){})},batchSet:function(t,n){var e=this,a=t?[t.id]:this.sels.map(function(t){return t.id});if(n)this.$confirm("确认拒绝用户申请吗？","提示",{type:"warning"}).then(function(){var t={ids:a.toString(),isChecked:!1};e.$postJson(e._basePath.ajaxOperationTailGoodsApplyPass,t).then(function(t){t.success&&(e.$message({message:"拒绝成功",type:"success"}),e.queryData())})}).catch(function(){});else{var o={ids:a.toString(),isChecked:!0};this.$postJson(this._basePath.ajaxOperationTailGoodsApplyPass,o).then(function(t){t.success&&(e.$message({message:"申请通过",type:"success"}),e.queryData())})}},getUsers:function(){var t=this,n={pageNum:this.pageNum,pageSize:this.pageSize,status:this.switchStatus-0};this.loading=!0,this.$postJson(this._basePath.ajaxOperationTailGoodsByPage,o()({},n,this.filters)).then(function(n){if(t.loading=!1,n.success){t.total=n.data.count;var e=n.data.datas;t.users=e}})}}},s={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",{staticClass:"app-container",attrs:{id:"hang_bill"}},[e("div",{staticClass:"switch_header"},[e("el-tabs",{staticClass:"switch_tabs",on:{"tab-click":t.queryData},model:{value:t.switchStatus,callback:function(n){t.switchStatus=n},expression:"switchStatus"}},[e("el-tab-pane",{attrs:{label:"等待审核",name:"0"}}),t._v(" "),e("el-tab-pane",{attrs:{label:"展示中",name:"1"}}),t._v(" "),e("el-tab-pane",{attrs:{label:"审核不通过",name:"2"}})],1)],1),t._v(" "),e("div",[e("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[e("el-form",{attrs:{inline:!0,model:t.filters},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{attrs:{label:"商品货号"}},[e("el-input",{attrs:{placeholder:"商品货号"},model:{value:t.filters.productCode,callback:function(n){t.$set(t.filters,"productCode",n)},expression:"filters.productCode"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"所属档口"}},[e("el-input",{attrs:{placeholder:"档口名称"},model:{value:t.filters.stallName,callback:function(n){t.$set(t.filters,"stallName",n)},expression:"filters.stallName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"报名时间"}},[e("date-pick",{ref:"dateFilter",model:{value:t.reset,callback:function(n){t.reset=n},expression:"reset"}})],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),e("el-button",{attrs:{type:"text",plain:""},on:{click:t.clearFilter}},[t._v("清空筛选条件")])],1)],1),t._v(" "),e("div",{staticClass:"process_btns"},["0"===t.switchStatus?e("el-button",{attrs:{type:"primary",disabled:0===this.sels.length},on:{click:function(n){t.batchSet()}}},[t._v("批量通过")]):t._e(),t._v(" "),"0"===t.switchStatus?e("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:function(n){t.batchSet(!1,!0)}}},[t._v("批量不通过")]):t._e(),t._v(" "),"1"===t.switchStatus?e("el-button",{attrs:{type:"primary",disabled:0===this.sels.length},on:{click:function(n){t.setToTop()}}},[t._v("批量置顶")]):t._e(),t._v(" "),t._isHave(t.switchStatus,["1","2"])?e("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:function(n){t.batchRemove()}}},[t._v("批量删除")]):t._e(),t._v(" "),e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(n){t.dialogShow=!0}}},[t._v("设置尾货处理规则")])],1)],1),t._v(" "),e("record-count",{attrs:{total:t.total}}),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.users,"highlight-current-row":""},on:{"selection-change":t.selsChange}},[e("el-table-column",{attrs:{type:"selection",width:"45"}}),t._v(" "),e("el-table-column",{attrs:{prop:"imgUrl_main",label:"图片",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{"max-width":"50px","max-height":"50px"},attrs:{src:t.row.imgUrl_main}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"商品货号",prop:"productCode",width:"180px"}}),t._v(" "),e("el-table-column",{attrs:{label:"所属档口",prop:"stallName"}}),t._v(" "),e("el-table-column",{attrs:{label:"拿货价/打包价",prop:"sellAndPackagePrice"}}),t._v(" "),t._isHave(t.switchStatus,["1"])?[e("el-table-column",{attrs:{label:"通过时间",prop:"auditTime",formatter:t.formatTime}})]:t._e(),t._v(" "),e("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticClass:"process_td"},[["0"===t.switchStatus?e("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(e){t.batchSet(n.row)}}},[t._v("通过")]):t._e(),t._v(" "),"0"===t.switchStatus?e("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(e){t.batchSet(n.row,!0)}}},[t._v("不通过")]):t._e(),t._v(" "),"1"===t.switchStatus?e("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(e){t.setToTop(n.row)}}},[t._v("置顶")]):t._e(),t._v(" "),t._isHave(t.switchStatus,["1","2"])?e("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(e){t.batchRemove(n.row,!0)}}},[t._v("删除")]):t._e()]],2)]}}])})],2),t._v(" "),e("div",{staticClass:"page_toolbar"},[e("el-pagination",{attrs:{layout:"prev, pager, next, jumper","prev-text":"上一页","next-text":"下一页",background:"","page-size":t.pageSize,"current-page":t.pageNum,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"设置展示规则",visible:t.dialogShow,width:"600px"},on:{"update:visible":function(n){t.dialogShow=n}}},[e("el-form",{ref:"editForm",staticStyle:{width:"80%",margin:"auto"},attrs:{model:t.editForm,"label-width":"130px"}},[e("el-form-item",{attrs:{label:"尾货处理规则",prop:"rule",rules:[{required:!0,validator:t.noEmpty,message:"规则不能为空"}]}},[e("el-input",{attrs:{type:"textarea",placeholder:"尾货规则定义"},model:{value:t.editForm.rule,callback:function(n){t.$set(t.editForm,"rule",n)},expression:"editForm.rule"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"最大尾货商品数",prop:"goodNum",rules:[{required:!0,validator:t.noEmpty,message:"不能为空"},{required:!0,validator:t._positiveInt,message:"商品数为正整数"}]}},[e("el-input",{attrs:{placeholder:"商品数"},model:{value:t.editForm.goodNum,callback:function(n){t.$set(t.editForm,"goodNum",n)},expression:"editForm.goodNum"}})],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(n){t.dialogShow=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.saveRule}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=e("VU/8")(i,s,!1,function(t){e("3yOb")},null,null);n.default=l.exports},rtdu:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.fn10 {\n  font-size: 10px;\n}\n.fn12 {\n  font-size: 12px;\n}\n.fn14 {\n  font-size: 14px;\n}\n.fn16 {\n  font-size: 16px;\n}\n.fn18 {\n  font-size: 18px;\n}\n.fn20 {\n  font-size: 20px;\n}\n.fn22 {\n  font-size: 22px;\n}\n.fn24 {\n  font-size: 24px;\n}\n.fn26 {\n  font-size: 26px;\n}\n.fn28 {\n  font-size: 28px;\n}\n.fn30 {\n  font-size: 30px;\n}\n.fn32 {\n  font-size: 32px;\n}\n.cursor {\n  cursor: pointer;\n}\n.fl {\n  float: left;\n}\n.fr {\n  float: right;\n}\n.title_public {\n  padding: 12px 0 18px 0;\n  font-size: 18px;\n  color: #0c0c0d;\n  border-bottom: solid 1px #e3e5e6;\n}\n.text_color {\n  color: #409eff;\n}\n.light_color {\n  color: #e3e4e6;\n}\n.err_color {\n  color: #f56c6c;\n}\n.suc_color {\n  color: #09bb07;\n}\n.center {\n  text-align: center;\n}\n.set_middle {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.set_start {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n}\n.set_between {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.set_around {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n}\n.set_column {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.page_toolbar {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n.table_records {\n  background-color: #bae7ff;\n  height: 50px;\n  float: left;\n  line-height: 50px;\n  margin-top: 20px;\n  margin-bottom: 10px;\n  width: 100%;\n  padding-left: 15px;\n}\n.table_records:before {\n  display: table;\n  content: '';\n}\n.table_records i {\n  color: #409eff;\n}\n.el-pagination .btn-prev,\n.el-pagination .btn-next {\n  padding: 0 12px !important;\n}\n.secondary_form {\n  width: 500px;\n}\n.secondary_form .el-cascader {\n  width: 100%;\n}\n.boxshadow {\n  -webkit-box-shadow: 0 0 5px 1px #ddd;\n          box-shadow: 0 0 5px 1px #ddd;\n}\n.drawer_form {\n  width: 500px;\n}\n.block {\n  display: block;\n}\n.indent {\n  text-indent: 30px;\n}\n.dotted_line {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding-top: 20px;\n  border-top: 1px dashed #ddd;\n}\n.dotted_line .other_item {\n  font-weight: bold;\n}\n.bold {\n  font-weight: bold;\n}\n.process_btns {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  margin-bottom: 20px;\n}\n.border_ {\n  border: 1px solid #ddd;\n}\n.line_through {\n  text-decoration: line-through;\n}\n#app .el-badge__content {\n  border: none;\n}\n.toolbar .el-form--inline .el-form-item__label {\n  padding-right: 8px;\n}\n.el-badge__content.is-fixed {\n  z-index: 99;\n}\nhtml,\nbody,\ndiv,\nspan,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\npre,\na,\nem,\nimg,\ni,\nol,\nul,\nfieldset,\nform,\nlabel,\ntable,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\ncanvas,\nfooter,\nheader,\nsection,\naudio,\nvideo {\n  border: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  margin: 0;\n  padding: 0;\n}\nli {\n  border: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  margin: 0;\n}\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\nol,\nul {\n  list-style: none;\n}\ninput,\nbutton,\nselect,\ntextarea {\n  outline: none;\n  -webkit-appearance: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\nbody,\nhtml {\n  font-family: 'Microsoft Yahei', 'Source Sans Pro', 'sans-serif';\n  line-height: 1;\n  height: 100%;\n  font-size: 14px;\n}\ni {\n  font-style: normal;\n}\n.err_color {\n  color: #f56c6c;\n}\n.success_color {\n  color: #67c23a;\n}\n.warn_color {\n  color: #e6a23c;\n}\n.light_color {\n  color: #909399;\n}\n.info_color {\n  color: #909399;\n}\n@font-face {\n  font-family: \"iconfont\";\n  src: url("+e("41FU")+") ;\n  src: url("+e("41FU")+"#iefix) format('embedded-opentype'), url("+e("AmmJ")+") format('woff'), url("+e("gjvD")+") format('truetype'), url("+e("xCPn")+"#iconfont) format('svg') ;\n}\n.icon {\n  font-family: \"iconfont\" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n#hang_bill textarea {\n  height: 120px;\n}\n#hang_bill .switch_header {\n  margin-bottom: 20px;\n}\n#hang_bill .switch_tabs .el-tabs__item {\n  font-size: 16px;\n}\n#hang_bill .el-tabs__content {\n  padding: 0;\n}\n",""])}});